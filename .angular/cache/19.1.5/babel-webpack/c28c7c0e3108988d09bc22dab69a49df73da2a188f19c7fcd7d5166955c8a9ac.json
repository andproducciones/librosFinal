{"ast":null,"code":"import _asyncToGenerator from \"C:/proyectosIONIC/librosFinal2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _LibroPage;\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"src/app/services/libros/libros.service\";\nimport * as i4 from \"@angular/router\";\nexport class LibroPage {\n  constructor(modalCtrl, fb, librosService, router) {\n    this.modalCtrl = modalCtrl;\n    this.fb = fb;\n    this.librosService = librosService;\n    this.router = router;\n    this.isEdit = false;\n    this.libroId = null;\n    this.libroForm = this.fb.group({\n      titulo: ['', Validators.required],\n      autor: ['', Validators.required],\n      anio_publicacion: ['', [Validators.required, Validators.min(1900), Validators.max(new Date().getFullYear())]],\n      descripcion: ['', Validators.required],\n      valoracion: ['', [Validators.required, Validators.min(1), Validators.max(10)]]\n    });\n  }\n  ngOnInit() {}\n  setLibro(libro) {\n    if (libro) {\n      this.isEdit = true;\n      this.libroId = libro.id;\n      this.libroForm.patchValue(libro);\n    }\n  }\n  cerrarModal() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.router.navigate(['/libros']);\n      yield _this.modalCtrl.dismiss();\n    })();\n  }\n  guardarLibro() {\n    if (this.isEdit) {\n      // Editar libro existente\n      this.librosService.editarLibro(this.libroId, this.libroForm.value).subscribe(response => {\n        this.modalCtrl.dismiss(response);\n      });\n    } else {\n      // Agregar nuevo libro\n      this.librosService.agregarLibro(this.libroForm.value).subscribe(response => {\n        this.modalCtrl.dismiss(response);\n      });\n    }\n  }\n}\n_LibroPage = LibroPage;\n_LibroPage.ɵfac = function LibroPage_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || _LibroPage)(i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.LibrosService), i0.ɵɵdirectiveInject(i4.Router));\n};\n_LibroPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _LibroPage,\n  selectors: [[\"app-libro\"]],\n  standalone: false,\n  decls: 31,\n  vars: 4,\n  consts: [[\"slot\", \"end\"], [3, \"click\"], [\"name\", \"close-outline\"], [1, \"ion-padding\"], [3, \"ngSubmit\", \"formGroup\"], [\"position\", \"floating\"], [\"formControlName\", \"titulo\", \"type\", \"text\"], [\"formControlName\", \"autor\", \"type\", \"text\"], [\"formControlName\", \"anio_publicacion\", \"type\", \"number\"], [\"formControlName\", \"descripcion\"], [\"formControlName\", \"valoracion\", \"type\", \"number\", \"min\", \"1\", \"max\", \"10\"], [\"expand\", \"block\", \"type\", \"submit\", 3, \"disabled\"]],\n  template: function LibroPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n      i0.ɵɵtext(3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"ion-buttons\", 0)(5, \"ion-button\", 1);\n      i0.ɵɵlistener(\"click\", function LibroPage_Template_ion_button_click_5_listener() {\n        return ctx.cerrarModal();\n      });\n      i0.ɵɵelement(6, \"ion-icon\", 2);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(7, \"ion-content\", 3)(8, \"form\", 4);\n      i0.ɵɵlistener(\"ngSubmit\", function LibroPage_Template_form_ngSubmit_8_listener() {\n        return ctx.guardarLibro();\n      });\n      i0.ɵɵelementStart(9, \"ion-item\")(10, \"ion-label\", 5);\n      i0.ɵɵtext(11, \"T\\u00EDtulo\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"ion-input\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"ion-item\")(14, \"ion-label\", 5);\n      i0.ɵɵtext(15, \"Autor\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(16, \"ion-input\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"ion-item\")(18, \"ion-label\", 5);\n      i0.ɵɵtext(19, \"A\\u00F1o de Publicaci\\u00F3n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(20, \"ion-input\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"ion-item\")(22, \"ion-label\", 5);\n      i0.ɵɵtext(23, \"Descripci\\u00F3n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(24, \"ion-textarea\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"ion-item\")(26, \"ion-label\", 5);\n      i0.ɵɵtext(27, \"Valoraci\\u00F3n (1 - 10)\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(28, \"ion-input\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"ion-button\", 11);\n      i0.ɵɵtext(30);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.isEdit ? \"Editar Libro\" : \"Agregar Nuevo Libro\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"formGroup\", ctx.libroForm);\n      i0.ɵɵadvance(21);\n      i0.ɵɵproperty(\"disabled\", ctx.libroForm.invalid);\n      i0.ɵɵadvance();\n      i0.ɵɵtextInterpolate1(\" \", ctx.isEdit ? \"Actualizar Libro\" : \"Agregar Libro\", \" \");\n    }\n  },\n  dependencies: [i2.ɵNgNoValidate, i2.NgControlStatus, i2.NgControlStatusGroup, i1.IonButton, i1.IonButtons, i1.IonContent, i1.IonHeader, i1.IonIcon, i1.IonInput, i1.IonItem, i1.IonLabel, i1.IonTextarea, i1.IonTitle, i1.IonToolbar, i1.NumericValueAccessor, i1.TextValueAccessor, i1.IonMinValidator, i1.IonMaxValidator, i2.FormGroupDirective, i2.FormControlName],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["Validators","LibroPage","constructor","modalCtrl","fb","librosService","router","isEdit","libroId","libroForm","group","titulo","required","autor","anio_publicacion","min","max","Date","getFullYear","descripcion","valoracion","ngOnInit","setLibro","libro","id","patchValue","cerrarModal","_this","_asyncToGenerator","navigate","dismiss","guardarLibro","editarLibro","value","subscribe","response","agregarLibro","i0","ɵɵdirectiveInject","i1","ModalController","i2","FormBuilder","i3","LibrosService","i4","Router","selectors","standalone","decls","vars","consts","template","LibroPage_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","LibroPage_Template_ion_button_click_5_listener","ɵɵelement","LibroPage_Template_form_ngSubmit_8_listener","ɵɵadvance","ɵɵtextInterpolate","ɵɵproperty","invalid","ɵɵtextInterpolate1"],"sources":["C:\\proyectosIONIC\\librosFinal2\\src\\app\\pages\\libro\\libro.page.ts","C:\\proyectosIONIC\\librosFinal2\\src\\app\\pages\\libro\\libro.page.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators, } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { LibrosService } from 'src/app/services/libros/libros.service';\r\n\r\n@Component({\r\n  selector: 'app-libro',\r\n  templateUrl: './libro.page.html',\r\n  styleUrls: ['./libro.page.scss'],\r\n  standalone: false\r\n})\r\nexport class LibroPage implements OnInit {\r\n  libroForm: FormGroup;\r\n  isEdit = false;\r\n  libroId: number | null = null;\r\n\r\n  constructor(\r\n    private modalCtrl: ModalController,\r\n    private fb: FormBuilder,\r\n    private librosService: LibrosService,\r\n    private router: Router\r\n  ) {\r\n    this.libroForm = this.fb.group({\r\n      titulo: ['', Validators.required],\r\n      autor: ['', Validators.required],\r\n      anio_publicacion: ['', [Validators.required, Validators.min(1900), Validators.max(new Date().getFullYear())]],\r\n      descripcion: ['', Validators.required],\r\n      valoracion: ['', [Validators.required, Validators.min(1), Validators.max(10)]]\r\n    });\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  setLibro(libro: any) {\r\n    if (libro) {\r\n      this.isEdit = true;\r\n      this.libroId = libro.id;\r\n      this.libroForm.patchValue(libro);\r\n    }\r\n  }\r\n\r\n  async cerrarModal() {\r\n\r\n   \r\n    this.router.navigate(['/libros']);\r\n    await this.modalCtrl.dismiss();\r\n  }\r\n\r\n  guardarLibro() {\r\n    if (this.isEdit) {\r\n      // Editar libro existente\r\n      this.librosService.editarLibro(this.libroId!, this.libroForm.value).subscribe(response => {\r\n        this.modalCtrl.dismiss(response);\r\n      });\r\n    } else {\r\n      // Agregar nuevo libro\r\n      this.librosService.agregarLibro(this.libroForm.value).subscribe(response => {\r\n        this.modalCtrl.dismiss(response);\r\n      });\r\n    }\r\n  }\r\n}","<ion-header>\r\n  <ion-toolbar>\r\n    <ion-title>{{ isEdit ? 'Editar Libro' : 'Agregar Nuevo Libro' }}</ion-title>\r\n    <ion-buttons slot=\"end\">\r\n      <ion-button (click)=\"cerrarModal()\">\r\n        <ion-icon name=\"close-outline\"></ion-icon>\r\n      </ion-button>\r\n    </ion-buttons>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"ion-padding\">\r\n  <form [formGroup]=\"libroForm\" (ngSubmit)=\"guardarLibro()\">\r\n    <ion-item>\r\n      <ion-label position=\"floating\">Título</ion-label>\r\n      <ion-input formControlName=\"titulo\" type=\"text\"></ion-input>\r\n    </ion-item>\r\n\r\n    <ion-item>\r\n      <ion-label position=\"floating\">Autor</ion-label>\r\n      <ion-input formControlName=\"autor\" type=\"text\"></ion-input>\r\n    </ion-item>\r\n\r\n    <ion-item>\r\n      <ion-label position=\"floating\">Año de Publicación</ion-label>\r\n      <ion-input formControlName=\"anio_publicacion\" type=\"number\"></ion-input>\r\n    </ion-item>\r\n\r\n    <ion-item>\r\n      <ion-label position=\"floating\">Descripción</ion-label>\r\n      <ion-textarea formControlName=\"descripcion\"></ion-textarea>\r\n    </ion-item>\r\n\r\n    <ion-item>\r\n      <ion-label position=\"floating\">Valoración (1 - 10)</ion-label>\r\n      <ion-input formControlName=\"valoracion\" type=\"number\" min=\"1\" max=\"10\"></ion-input>\r\n    </ion-item>\r\n\r\n    <ion-button expand=\"block\" type=\"submit\" [disabled]=\"libroForm.invalid\">\r\n      {{ isEdit ? 'Actualizar Libro' : 'Agregar Libro' }}\r\n    </ion-button>\r\n  </form>\r\n</ion-content>\r\n"],"mappings":";;AACA,SAAiCA,UAAU,QAAS,gBAAgB;;;;;;AAWpE,OAAM,MAAOC,SAAS;EAKpBC,YACUC,SAA0B,EAC1BC,EAAe,EACfC,aAA4B,EAC5BC,MAAc;IAHd,KAAAH,SAAS,GAATA,SAAS;IACT,KAAAC,EAAE,GAAFA,EAAE;IACF,KAAAC,aAAa,GAAbA,aAAa;IACb,KAAAC,MAAM,GAANA,MAAM;IAPhB,KAAAC,MAAM,GAAG,KAAK;IACd,KAAAC,OAAO,GAAkB,IAAI;IAQ3B,IAAI,CAACC,SAAS,GAAG,IAAI,CAACL,EAAE,CAACM,KAAK,CAAC;MAC7BC,MAAM,EAAE,CAAC,EAAE,EAAEX,UAAU,CAACY,QAAQ,CAAC;MACjCC,KAAK,EAAE,CAAC,EAAE,EAAEb,UAAU,CAACY,QAAQ,CAAC;MAChCE,gBAAgB,EAAE,CAAC,EAAE,EAAE,CAACd,UAAU,CAACY,QAAQ,EAAEZ,UAAU,CAACe,GAAG,CAAC,IAAI,CAAC,EAAEf,UAAU,CAACgB,GAAG,CAAC,IAAIC,IAAI,EAAE,CAACC,WAAW,EAAE,CAAC,CAAC,CAAC;MAC7GC,WAAW,EAAE,CAAC,EAAE,EAAEnB,UAAU,CAACY,QAAQ,CAAC;MACtCQ,UAAU,EAAE,CAAC,EAAE,EAAE,CAACpB,UAAU,CAACY,QAAQ,EAAEZ,UAAU,CAACe,GAAG,CAAC,CAAC,CAAC,EAAEf,UAAU,CAACgB,GAAG,CAAC,EAAE,CAAC,CAAC;KAC9E,CAAC;EACJ;EAEAK,QAAQA,CAAA,GAAI;EAEZC,QAAQA,CAACC,KAAU;IACjB,IAAIA,KAAK,EAAE;MACT,IAAI,CAAChB,MAAM,GAAG,IAAI;MAClB,IAAI,CAACC,OAAO,GAAGe,KAAK,CAACC,EAAE;MACvB,IAAI,CAACf,SAAS,CAACgB,UAAU,CAACF,KAAK,CAAC;IAClC;EACF;EAEMG,WAAWA,CAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MAGfD,KAAI,CAACrB,MAAM,CAACuB,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC;MACjC,MAAMF,KAAI,CAACxB,SAAS,CAAC2B,OAAO,EAAE;IAAC;EACjC;EAEAC,YAAYA,CAAA;IACV,IAAI,IAAI,CAACxB,MAAM,EAAE;MACf;MACA,IAAI,CAACF,aAAa,CAAC2B,WAAW,CAAC,IAAI,CAACxB,OAAQ,EAAE,IAAI,CAACC,SAAS,CAACwB,KAAK,CAAC,CAACC,SAAS,CAACC,QAAQ,IAAG;QACvF,IAAI,CAAChC,SAAS,CAAC2B,OAAO,CAACK,QAAQ,CAAC;MAClC,CAAC,CAAC;IACJ,CAAC,MAAM;MACL;MACA,IAAI,CAAC9B,aAAa,CAAC+B,YAAY,CAAC,IAAI,CAAC3B,SAAS,CAACwB,KAAK,CAAC,CAACC,SAAS,CAACC,QAAQ,IAAG;QACzE,IAAI,CAAChC,SAAS,CAAC2B,OAAO,CAACK,QAAQ,CAAC;MAClC,CAAC,CAAC;IACJ;EACF;;aAjDWlC,SAAS;;mCAATA,UAAS,EAAAoC,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,eAAA,GAAAH,EAAA,CAAAC,iBAAA,CAAAG,EAAA,CAAAC,WAAA,GAAAL,EAAA,CAAAC,iBAAA,CAAAK,EAAA,CAAAC,aAAA,GAAAP,EAAA,CAAAC,iBAAA,CAAAO,EAAA,CAAAC,MAAA;AAAA;;QAAT7C,UAAS;EAAA8C,SAAA;EAAAC,UAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,mBAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCVlBjB,EAFJ,CAAAmB,cAAA,iBAAY,kBACG,gBACA;MAAAnB,EAAA,CAAAoB,MAAA,GAAqD;MAAApB,EAAA,CAAAqB,YAAA,EAAY;MAE1ErB,EADF,CAAAmB,cAAA,qBAAwB,oBACc;MAAxBnB,EAAA,CAAAsB,UAAA,mBAAAC,+CAAA;QAAA,OAASL,GAAA,CAAA7B,WAAA,EAAa;MAAA,EAAC;MACjCW,EAAA,CAAAwB,SAAA,kBAA0C;MAIlDxB,EAHM,CAAAqB,YAAA,EAAa,EACD,EACF,EACH;MAGXrB,EADF,CAAAmB,cAAA,qBAAiC,cAC2B;MAA5BnB,EAAA,CAAAsB,UAAA,sBAAAG,4CAAA;QAAA,OAAYP,GAAA,CAAAxB,YAAA,EAAc;MAAA,EAAC;MAErDM,EADF,CAAAmB,cAAA,eAAU,oBACuB;MAAAnB,EAAA,CAAAoB,MAAA,mBAAM;MAAApB,EAAA,CAAAqB,YAAA,EAAY;MACjDrB,EAAA,CAAAwB,SAAA,oBAA4D;MAC9DxB,EAAA,CAAAqB,YAAA,EAAW;MAGTrB,EADF,CAAAmB,cAAA,gBAAU,oBACuB;MAAAnB,EAAA,CAAAoB,MAAA,aAAK;MAAApB,EAAA,CAAAqB,YAAA,EAAY;MAChDrB,EAAA,CAAAwB,SAAA,oBAA2D;MAC7DxB,EAAA,CAAAqB,YAAA,EAAW;MAGTrB,EADF,CAAAmB,cAAA,gBAAU,oBACuB;MAAAnB,EAAA,CAAAoB,MAAA,oCAAkB;MAAApB,EAAA,CAAAqB,YAAA,EAAY;MAC7DrB,EAAA,CAAAwB,SAAA,oBAAwE;MAC1ExB,EAAA,CAAAqB,YAAA,EAAW;MAGTrB,EADF,CAAAmB,cAAA,gBAAU,oBACuB;MAAAnB,EAAA,CAAAoB,MAAA,wBAAW;MAAApB,EAAA,CAAAqB,YAAA,EAAY;MACtDrB,EAAA,CAAAwB,SAAA,uBAA2D;MAC7DxB,EAAA,CAAAqB,YAAA,EAAW;MAGTrB,EADF,CAAAmB,cAAA,gBAAU,oBACuB;MAAAnB,EAAA,CAAAoB,MAAA,gCAAmB;MAAApB,EAAA,CAAAqB,YAAA,EAAY;MAC9DrB,EAAA,CAAAwB,SAAA,qBAAmF;MACrFxB,EAAA,CAAAqB,YAAA,EAAW;MAEXrB,EAAA,CAAAmB,cAAA,sBAAwE;MACtEnB,EAAA,CAAAoB,MAAA,IACF;MAEJpB,EAFI,CAAAqB,YAAA,EAAa,EACR,EACK;;;MAxCCrB,EAAA,CAAA0B,SAAA,GAAqD;MAArD1B,EAAA,CAAA2B,iBAAA,CAAAT,GAAA,CAAAhD,MAAA,0CAAqD;MAU5D8B,EAAA,CAAA0B,SAAA,GAAuB;MAAvB1B,EAAA,CAAA4B,UAAA,cAAAV,GAAA,CAAA9C,SAAA,CAAuB;MA0Bc4B,EAAA,CAAA0B,SAAA,IAA8B;MAA9B1B,EAAA,CAAA4B,UAAA,aAAAV,GAAA,CAAA9C,SAAA,CAAAyD,OAAA,CAA8B;MACrE7B,EAAA,CAAA0B,SAAA,EACF;MADE1B,EAAA,CAAA8B,kBAAA,MAAAZ,GAAA,CAAAhD,MAAA,6CACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}