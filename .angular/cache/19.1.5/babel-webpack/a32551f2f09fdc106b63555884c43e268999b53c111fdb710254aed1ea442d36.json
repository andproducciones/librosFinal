{"ast":null,"code":"import _asyncToGenerator from \"C:/proyectosIONIC/librosFinal2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _ResenasPage;\nimport { ResenaPage } from '../resena/resena.page';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/resenas/resenas.service\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/common\";\nfunction ResenasPage_ion_card_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-card-header\")(2, \"ion-card-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 7);\n    i0.ɵɵelement(5, \"ion-icon\", 8);\n    i0.ɵɵelementStart(6, \"span\", 9);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"ion-card-subtitle\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"ion-card-content\")(12, \"p\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 10)(15, \"ion-button\", 11);\n    i0.ɵɵlistener(\"click\", function ResenasPage_ion_card_8_Template_ion_button_click_15_listener() {\n      const resena_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.abrirModalEditarResena(resena_r2));\n    });\n    i0.ɵɵelement(16, \"ion-icon\", 12);\n    i0.ɵɵtext(17, \" Editar \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"ion-button\", 13);\n    i0.ɵɵlistener(\"click\", function ResenasPage_ion_card_8_Template_ion_button_click_18_listener() {\n      const resena_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.eliminarResena(resena_r2.id));\n    });\n    i0.ɵɵelement(19, \"ion-icon\", 14);\n    i0.ɵɵtext(20, \" Eliminar \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const resena_r2 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(resena_r2.usuario);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", resena_r2.calificacion, \"/10\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(10, 4, resena_r2.fecha));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(resena_r2.comentario);\n  }\n}\nexport class ResenasPage {\n  constructor(route, resenasService, router, modalCtrl) {\n    this.route = route;\n    this.resenasService = resenasService;\n    this.router = router;\n    this.modalCtrl = modalCtrl;\n    this.resenas = [{\n      id: 1,\n      libro_id: 1,\n      usuario_id: 1,\n      calificacion: 9,\n      comentario: \"Una obra maestra que me transportó a Macondo. La narrativa de Gabriel García Márquez es única.\",\n      fecha: \"2025-01-01 14:30:00\"\n    }, {\n      id: 2,\n      libro_id: 1,\n      usuario_id: 2,\n      calificacion: 8,\n      comentario: \"Muy buen libro, aunque algunos pasajes se sienten un poco densos.\",\n      fecha: \"2025-01-03 10:15:00\"\n    }, {\n      id: 3,\n      libro_id: 2,\n      usuario_id: 3,\n      calificacion: 10,\n      comentario: \"Impactante y visionario. Orwell describe un futuro que se siente más cercano cada día.\",\n      fecha: \"2025-01-05 16:45:00\"\n    }, {\n      id: 4,\n      libro_id: 2,\n      usuario_id: 4,\n      calificacion: 7,\n      comentario: \"Me gustó la historia, pero algunas partes fueron difíciles de seguir.\",\n      fecha: \"2025-01-07 09:20:00\"\n    }, {\n      id: 5,\n      libro_id: 3,\n      usuario_id: 5,\n      calificacion: 10,\n      comentario: \"Un clásico imprescindible. La locura de Don Quijote y la lealtad de Sancho Panza me hicieron reír y reflexionar.\",\n      fecha: \"2025-01-10 13:10:00\"\n    }, {\n      id: 6,\n      libro_id: 3,\n      usuario_id: 6,\n      calificacion: 8,\n      comentario: \"La obra es excelente, pero se necesita paciencia para disfrutarla por completo.\",\n      fecha: \"2025-01-12 11:00:00\"\n    }, {\n      id: 7,\n      libro_id: 4,\n      usuario_id: 7,\n      calificacion: 9,\n      comentario: \"Jane Austen muestra de manera brillante las tensiones sociales y los matices del amor.\",\n      fecha: \"2025-01-14 15:30:00\"\n    }, {\n      id: 8,\n      libro_id: 4,\n      usuario_id: 8,\n      calificacion: 6,\n      comentario: \"No fue lo que esperaba, aunque los personajes están bien desarrollados.\",\n      fecha: \"2025-01-15 18:45:00\"\n    }, {\n      id: 9,\n      libro_id: 5,\n      usuario_id: 9,\n      calificacion: 10,\n      comentario: \"La Tierra Media de Tolkien es un mundo mágico que me cautivó por completo. ¡Impresionante!\",\n      fecha: \"2025-01-18 20:00:00\"\n    }, {\n      id: 10,\n      libro_id: 5,\n      usuario_id: 10,\n      calificacion: 9,\n      comentario: \"Un viaje épico lleno de aventuras y personajes inolvidables. Altamente recomendado.\",\n      fecha: \"2025-01-19 09:50:00\"\n    }];\n    this.libroTitulo = '';\n  }\n  ngOnInit() {\n    // Obtener el ID del libro desde la URL\n    this.libroId = +this.route.snapshot.paramMap.get('id');\n    this.libroTitulo = this.route.snapshot.queryParamMap.get('titulo') || 'Libro';\n    this.obtenerResenas();\n  }\n  obtenerResenas() {\n    this.resenasService.obtenerResenas(this.libroId).subscribe(response => {\n      this.resenas = response;\n    }, error => {\n      console.error('Error al obtener las reseñas', error);\n    });\n  }\n  abrirModalNuevaResena() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const modal = yield _this.modalCtrl.create({\n        component: ResenaPage,\n        cssClass: 'modal-bottom',\n        backdropDismiss: false\n      });\n      modal.onDidDismiss().then(() => _this.obtenerResenas());\n      return modal.present();\n    })();\n  }\n  abrirModalEditarResena(resena) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const modal = yield _this2.modalCtrl.create({\n        component: ResenaPage,\n        componentProps: {\n          resena\n        },\n        cssClass: 'modal-bottom',\n        backdropDismiss: false\n      });\n      modal.onDidDismiss().then(() => _this2.obtenerResenas());\n      return modal.present();\n    })();\n  }\n  eliminarResena(resenaId) {\n    this.resenasService.eliminarResena(resenaId).subscribe(response => {\n      if (response.estado) {\n        this.resenas = this.resenas.filter(resena => resena.id !== resenaId);\n        alert('Reseña eliminada correctamente.');\n      } else {\n        alert('No se pudo eliminar la reseña.');\n      }\n    });\n  }\n  /**\n   * Genera un array de estrellas según la calificación.\n   * Ejemplo: Si la calificación es 4.5, devuelve ['star', 'star', 'star', 'star', 'star-half'].\n   */\n  getStarArray(calificacion) {\n    const estrellas = [];\n    const valorRedondeado = Math.round(calificacion * 2) / 2;\n    for (let i = 1; i <= 5; i++) {\n      if (i <= valorRedondeado) {\n        estrellas.push('star'); // Estrella llena\n      } else if (i - 0.5 === valorRedondeado) {\n        estrellas.push('star-half'); // Media estrella\n      } else {\n        estrellas.push('star-outline'); // Estrella vacía\n      }\n    }\n    return estrellas;\n  }\n}\n_ResenasPage = ResenasPage;\n_ResenasPage.ɵfac = function ResenasPage_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || _ResenasPage)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ResenasService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i3.ModalController));\n};\n_ResenasPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _ResenasPage,\n  selectors: [[\"app-resenas\"]],\n  standalone: false,\n  decls: 12,\n  vars: 1,\n  consts: [[\"slot\", \"start\"], [\"defaultHref\", \"/libros\"], [1, \"ion-padding\"], [4, \"ngFor\", \"ngForOf\"], [\"vertical\", \"bottom\", \"horizontal\", \"end\", \"slot\", \"fixed\"], [3, \"click\"], [\"name\", \"add-outline\", 2, \"color\", \"white\"], [1, \"rating\"], [\"name\", \"star\", 1, \"star-icon\"], [1, \"calificacion\"], [1, \"action-buttons\"], [\"color\", \"secondary\", 3, \"click\"], [\"name\", \"create-outline\", \"slot\", \"start\"], [\"color\", \"danger\", 3, \"click\"], [\"name\", \"trash-outline\", \"slot\", \"start\"]],\n  template: function ResenasPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n      i0.ɵɵelement(3, \"ion-back-button\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"ion-title\");\n      i0.ɵɵtext(5, \"Rese\\u00F1as\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(6, \"ion-content\", 2)(7, \"ion-list\");\n      i0.ɵɵtemplate(8, ResenasPage_ion_card_8_Template, 21, 6, \"ion-card\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"ion-fab\", 4)(10, \"ion-fab-button\", 5);\n      i0.ɵɵlistener(\"click\", function ResenasPage_Template_ion_fab_button_click_10_listener() {\n        return ctx.abrirModalNuevaResena();\n      });\n      i0.ɵɵelement(11, \"ion-icon\", 6);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngForOf\", ctx.resenas);\n    }\n  },\n  dependencies: [i4.NgForOf, i3.IonButton, i3.IonButtons, i3.IonCard, i3.IonCardContent, i3.IonCardHeader, i3.IonCardSubtitle, i3.IonCardTitle, i3.IonContent, i3.IonFab, i3.IonFabButton, i3.IonHeader, i3.IonIcon, i3.IonList, i3.IonTitle, i3.IonToolbar, i3.IonBackButton, i4.DatePipe],\n  styles: [\"@charset \\\"UTF-8\\\";\\n\\n\\nion-content[_ngcontent-%COMP%] {\\n  --background: #f8f8f8;\\n  padding: 15px;\\n}\\n\\n\\n\\nion-card[_ngcontent-%COMP%] {\\n  --background: white;\\n  border-radius: 12px;\\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\\n  border: 1px solid rgba(200, 200, 200, 0.5);\\n  margin-bottom: 15px;\\n  padding: 15px;\\n}\\n\\n\\n\\nion-card-title[_ngcontent-%COMP%] {\\n  font-size: 1.2rem;\\n  font-weight: bold;\\n  color: #333;\\n}\\n\\n\\n\\nion-card-subtitle[_ngcontent-%COMP%] {\\n  font-size: 0.9rem;\\n  color: #888;\\n  margin-bottom: 10px;\\n}\\n\\n\\n\\n.rating[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  margin-bottom: 10px;\\n}\\n\\n\\n\\n.star-icon[_ngcontent-%COMP%] {\\n  color: #FFD700; \\n\\n  font-size: 1.5rem;\\n  margin-right: 5px;\\n}\\n\\n\\n\\n.calificacion[_ngcontent-%COMP%] {\\n  font-size: 1.2rem;\\n  font-weight: bold;\\n  color: #007bff; \\n\\n}\\n\\n\\n\\n.action-buttons[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  gap: 10px;\\n  margin-top: 10px;\\n}\\n\\n\\n\\nion-button[color=secondary][_ngcontent-%COMP%] {\\n  --background: #ffa726;\\n  --background-hover: #fb8c00;\\n  --color: white;\\n}\\n\\n\\n\\nion-button[color=danger][_ngcontent-%COMP%] {\\n  --background: #e53935;\\n  --background-hover: #c62828;\\n  --color: white;\\n}\\n\\n\\n\\nion-fab-button[_ngcontent-%COMP%] {\\n  --background: #007bff;\\n  --color: white;\\n  --border-radius: 50%;\\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvcmVzZW5hcy9yZXNlbmFzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0I7QUFBaEIsaUNBQUE7QUFDQTtFQUNFLHFCQUFBO0VBQ0EsYUFBQTtBQUVGOztBQUNBLHNDQUFBO0FBQ0E7RUFDRSxtQkFBQTtFQUNBLG1CQUFBO0VBQ0EseUNBQUE7RUFDQSwwQ0FBQTtFQUNBLG1CQUFBO0VBQ0EsYUFBQTtBQUVGOztBQUNBLHVCQUFBO0FBQ0E7RUFDRSxpQkFBQTtFQUNBLGlCQUFBO0VBQ0EsV0FBQTtBQUVGOztBQUNBLHVCQUFBO0FBQ0E7RUFDRSxpQkFBQTtFQUNBLFdBQUE7RUFDQSxtQkFBQTtBQUVGOztBQUNBLGtDQUFBO0FBQ0E7RUFDRSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSxtQkFBQTtBQUVGOztBQUNBLHlCQUFBO0FBQ0E7RUFDRSxjQUFBLEVBQUEsa0NBQUE7RUFDQSxpQkFBQTtFQUNBLGlCQUFBO0FBRUY7O0FBQ0EsOEJBQUE7QUFDQTtFQUNFLGlCQUFBO0VBQ0EsaUJBQUE7RUFDQSxjQUFBLEVBQUEsU0FBQTtBQUVGOztBQUNBLHdDQUFBO0FBQ0E7RUFDRSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSw4QkFBQTtFQUNBLFNBQUE7RUFDQSxnQkFBQTtBQUVGOztBQUNBLG9CQUFBO0FBQ0E7RUFDRSxxQkFBQTtFQUNBLDJCQUFBO0VBQ0EsY0FBQTtBQUVGOztBQUNBLHNCQUFBO0FBQ0E7RUFDRSxxQkFBQTtFQUNBLDJCQUFBO0VBQ0EsY0FBQTtBQUVGOztBQUNBLG1CQUFBO0FBQ0E7RUFDRSxxQkFBQTtFQUNBLGNBQUE7RUFDQSxvQkFBQTtFQUNBLDBDQUFBO0FBRUYiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBFc3RpbG8gZ2VuZXJhbCBkZWwgY29udGVuaWRvICovXHJcbmlvbi1jb250ZW50IHtcclxuICAtLWJhY2tncm91bmQ6ICNmOGY4Zjg7XHJcbiAgcGFkZGluZzogMTVweDtcclxufVxyXG5cclxuLyogRXN0aWxvIGRlIGxhcyB0YXJqZXRhcyBkZSByZXNlw4PCsWFzICovXHJcbmlvbi1jYXJkIHtcclxuICAtLWJhY2tncm91bmQ6IHdoaXRlO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEycHg7XHJcbiAgYm94LXNoYWRvdzogMCA0cHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyMDAsIDIwMCwgMjAwLCAwLjUpO1xyXG4gIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbiAgcGFkZGluZzogMTVweDtcclxufVxyXG5cclxuLyogTm9tYnJlIGRlbCB1c3VhcmlvICovXHJcbmlvbi1jYXJkLXRpdGxlIHtcclxuICBmb250LXNpemU6IDEuMnJlbTtcclxuICBmb250LXdlaWdodDogYm9sZDtcclxuICBjb2xvcjogIzMzMztcclxufVxyXG5cclxuLyogRmVjaGEgZGUgbGEgcmVzZcODwrFhICovXHJcbmlvbi1jYXJkLXN1YnRpdGxlIHtcclxuICBmb250LXNpemU6IDAuOXJlbTtcclxuICBjb2xvcjogIzg4ODtcclxuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG59XHJcblxyXG4vKiBDb250ZW5lZG9yIGRlIGxhIGNhbGlmaWNhY2nDg8KzbiAqL1xyXG4ucmF0aW5nIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxufVxyXG5cclxuLyogw4PCjWNvbm8gZGUgbGEgZXN0cmVsbGEgKi9cclxuLnN0YXItaWNvbiB7XHJcbiAgY29sb3I6ICNGRkQ3MDA7IC8qIENvbG9yIGRvcmFkbyBwYXJhIGxhIGVzdHJlbGxhICovXHJcbiAgZm9udC1zaXplOiAxLjVyZW07XHJcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7XHJcbn1cclxuXHJcbi8qIE7Dg8K6bWVybyBkZSBsYSBjYWxpZmljYWNpw4PCs24gKi9cclxuLmNhbGlmaWNhY2lvbiB7XHJcbiAgZm9udC1zaXplOiAxLjJyZW07XHJcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgY29sb3I6ICMwMDdiZmY7IC8qIEF6dWwgKi9cclxufVxyXG5cclxuLyogQ29udGVuZWRvciBkZSBsb3MgYm90b25lcyBkZSBhY2Npw4PCs24gKi9cclxuLmFjdGlvbi1idXR0b25zIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gIGdhcDogMTBweDtcclxuICBtYXJnaW4tdG9wOiAxMHB4O1xyXG59XHJcblxyXG4vKiBCb3TDg8KzbiBkZSBlZGl0YXIgKi9cclxuaW9uLWJ1dHRvbltjb2xvcj1cInNlY29uZGFyeVwiXSB7XHJcbiAgLS1iYWNrZ3JvdW5kOiAjZmZhNzI2O1xyXG4gIC0tYmFja2dyb3VuZC1ob3ZlcjogI2ZiOGMwMDtcclxuICAtLWNvbG9yOiB3aGl0ZTtcclxufVxyXG5cclxuLyogQm90w4PCs24gZGUgZWxpbWluYXIgKi9cclxuaW9uLWJ1dHRvbltjb2xvcj1cImRhbmdlclwiXSB7XHJcbiAgLS1iYWNrZ3JvdW5kOiAjZTUzOTM1O1xyXG4gIC0tYmFja2dyb3VuZC1ob3ZlcjogI2M2MjgyODtcclxuICAtLWNvbG9yOiB3aGl0ZTtcclxufVxyXG5cclxuLyogQm90w4PCs24gZmxvdGFudGUgKi9cclxuaW9uLWZhYi1idXR0b24ge1xyXG4gIC0tYmFja2dyb3VuZDogIzAwN2JmZjtcclxuICAtLWNvbG9yOiB3aGl0ZTtcclxuICAtLWJvcmRlci1yYWRpdXM6IDUwJTtcclxuICBib3gtc2hhZG93OiAwcHggNHB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMik7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["ResenaPage","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵlistener","ResenasPage_ion_card_8_Template_ion_button_click_15_listener","resena_r2","ɵɵrestoreView","_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","abrirModalEditarResena","ResenasPage_ion_card_8_Template_ion_button_click_18_listener","eliminarResena","id","ɵɵadvance","ɵɵtextInterpolate","usuario","ɵɵtextInterpolate1","calificacion","ɵɵpipeBind1","fecha","comentario","ResenasPage","constructor","route","resenasService","router","modalCtrl","resenas","libro_id","usuario_id","libroTitulo","ngOnInit","libroId","snapshot","paramMap","get","queryParamMap","obtenerResenas","subscribe","response","error","console","abrirModalNuevaResena","_this","_asyncToGenerator","modal","create","component","cssClass","backdropDismiss","onDidDismiss","then","present","resena","_this2","componentProps","resenaId","estado","filter","alert","getStarArray","estrellas","valorRedondeado","Math","round","i","push","ɵɵdirectiveInject","i1","ActivatedRoute","i2","ResenasService","Router","i3","ModalController","selectors","standalone","decls","vars","consts","template","ResenasPage_Template","rf","ctx","ɵɵtemplate","ResenasPage_ion_card_8_Template","ResenasPage_Template_ion_fab_button_click_10_listener","ɵɵproperty"],"sources":["C:\\proyectosIONIC\\librosFinal2\\src\\app\\pages\\resenas\\resenas.page.ts","C:\\proyectosIONIC\\librosFinal2\\src\\app\\pages\\resenas\\resenas.page.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ResenasService } from 'src/app/services/resenas/resenas.service';\r\nimport { ResenaPage } from '../resena/resena.page';\r\nimport { ModalController } from '@ionic/angular';\r\n@Component({\r\n  selector: 'app-resenas',\r\n  templateUrl: './resenas.page.html',\r\n  styleUrls: ['./resenas.page.scss'],\r\n  standalone: false\r\n})\r\nexport class ResenasPage implements OnInit {\r\n  resenas: any[] = [{\r\n    id: 1,\r\n    libro_id: 1,\r\n    usuario_id: 1,\r\n    calificacion: 9,\r\n    comentario: \"Una obra maestra que me transportó a Macondo. La narrativa de Gabriel García Márquez es única.\",\r\n    fecha: \"2025-01-01 14:30:00\",\r\n  },\r\n  {\r\n    id: 2,\r\n    libro_id: 1,\r\n    usuario_id: 2,\r\n    calificacion: 8,\r\n    comentario: \"Muy buen libro, aunque algunos pasajes se sienten un poco densos.\",\r\n    fecha: \"2025-01-03 10:15:00\",\r\n  },\r\n  {\r\n    id: 3,\r\n    libro_id: 2,\r\n    usuario_id: 3,\r\n    calificacion: 10,\r\n    comentario: \"Impactante y visionario. Orwell describe un futuro que se siente más cercano cada día.\",\r\n    fecha: \"2025-01-05 16:45:00\",\r\n  },\r\n  {\r\n    id: 4,\r\n    libro_id: 2,\r\n    usuario_id: 4,\r\n    calificacion: 7,\r\n    comentario: \"Me gustó la historia, pero algunas partes fueron difíciles de seguir.\",\r\n    fecha: \"2025-01-07 09:20:00\",\r\n  },\r\n  {\r\n    id: 5,\r\n    libro_id: 3,\r\n    usuario_id: 5,\r\n    calificacion: 10,\r\n    comentario: \"Un clásico imprescindible. La locura de Don Quijote y la lealtad de Sancho Panza me hicieron reír y reflexionar.\",\r\n    fecha: \"2025-01-10 13:10:00\",\r\n  },\r\n  {\r\n    id: 6,\r\n    libro_id: 3,\r\n    usuario_id: 6,\r\n    calificacion: 8,\r\n    comentario: \"La obra es excelente, pero se necesita paciencia para disfrutarla por completo.\",\r\n    fecha: \"2025-01-12 11:00:00\",\r\n  },\r\n  {\r\n    id: 7,\r\n    libro_id: 4,\r\n    usuario_id: 7,\r\n    calificacion: 9,\r\n    comentario: \"Jane Austen muestra de manera brillante las tensiones sociales y los matices del amor.\",\r\n    fecha: \"2025-01-14 15:30:00\",\r\n  },\r\n  {\r\n    id: 8,\r\n    libro_id: 4,\r\n    usuario_id: 8,\r\n    calificacion: 6,\r\n    comentario: \"No fue lo que esperaba, aunque los personajes están bien desarrollados.\",\r\n    fecha: \"2025-01-15 18:45:00\",\r\n  },\r\n  {\r\n    id: 9,\r\n    libro_id: 5,\r\n    usuario_id: 9,\r\n    calificacion: 10,\r\n    comentario: \"La Tierra Media de Tolkien es un mundo mágico que me cautivó por completo. ¡Impresionante!\",\r\n    fecha: \"2025-01-18 20:00:00\",\r\n  },\r\n  {\r\n    id: 10,\r\n    libro_id: 5,\r\n    usuario_id: 10,\r\n    calificacion: 9,\r\n    comentario: \"Un viaje épico lleno de aventuras y personajes inolvidables. Altamente recomendado.\",\r\n    fecha: \"2025-01-19 09:50:00\",\r\n  }];\r\n  libroId: any;\r\n  libroTitulo: string = '';\r\n\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private resenasService: ResenasService,\r\n    private router: Router,\r\n    private modalCtrl: ModalController, \r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    // Obtener el ID del libro desde la URL\r\n    this.libroId = +this.route.snapshot.paramMap.get('id')!;\r\n    this.libroTitulo = this.route.snapshot.queryParamMap.get('titulo') || 'Libro';\r\n    this.obtenerResenas();\r\n  }\r\n\r\n  obtenerResenas() {\r\n    this.resenasService.obtenerResenas(this.libroId).subscribe(response => {\r\n      this.resenas = response;\r\n    }, error => {\r\n      console.error('Error al obtener las reseñas', error);\r\n    });\r\n  }\r\n\r\n  \r\n  async abrirModalNuevaResena() {\r\n    const modal = await this.modalCtrl.create({\r\n      component: ResenaPage,\r\n      cssClass: 'modal-bottom',\r\n      backdropDismiss: false\r\n    });\r\n\r\n    modal.onDidDismiss().then(() => this.obtenerResenas());\r\n    return modal.present();\r\n  }\r\n\r\n  async abrirModalEditarResena(resena: any) {\r\n    const modal = await this.modalCtrl.create({\r\n      component: ResenaPage,\r\n      componentProps: { resena },\r\n      cssClass: 'modal-bottom',\r\n      backdropDismiss: false\r\n    });\r\n\r\n    modal.onDidDismiss().then(() => this.obtenerResenas());\r\n    return modal.present();\r\n  }\r\n\r\n  eliminarResena(resenaId: number) {\r\n    this.resenasService.eliminarResena(resenaId).subscribe(response => {\r\n      if (response.estado) {\r\n        this.resenas = this.resenas.filter(resena => resena.id !== resenaId);\r\n        alert('Reseña eliminada correctamente.');\r\n      } else {\r\n        alert('No se pudo eliminar la reseña.');\r\n      }\r\n    });\r\n  }\r\n\r\n  \r\n\r\n  /**\r\n   * Genera un array de estrellas según la calificación.\r\n   * Ejemplo: Si la calificación es 4.5, devuelve ['star', 'star', 'star', 'star', 'star-half'].\r\n   */\r\n  getStarArray(calificacion: number): string[] {\r\n    const estrellas = [];\r\n    const valorRedondeado = Math.round(calificacion * 2) / 2;\r\n\r\n    for (let i = 1; i <= 5; i++) {\r\n      if (i <= valorRedondeado) {\r\n        estrellas.push('star'); // Estrella llena\r\n      } else if (i - 0.5 === valorRedondeado) {\r\n        estrellas.push('star-half'); // Media estrella\r\n      } else {\r\n        estrellas.push('star-outline'); // Estrella vacía\r\n      }\r\n    }\r\n    return estrellas;\r\n  }\r\n}","<ion-header>\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"/libros\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>Reseñas</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n\r\n<ion-content class=\"ion-padding\">\r\n  <ion-list>\r\n    <ion-card *ngFor=\"let resena of resenas\">\r\n      <ion-card-header>\r\n        <ion-card-title>{{ resena.usuario }}</ion-card-title>\r\n\r\n        <!-- Valoración con estrella y número -->\r\n        <div class=\"rating\">\r\n          <ion-icon name=\"star\" class=\"star-icon\"></ion-icon>\r\n          <span class=\"calificacion\">{{ resena.calificacion }}/10</span>\r\n        </div>\r\n\r\n        <ion-card-subtitle>{{ resena.fecha | date }}</ion-card-subtitle>\r\n      </ion-card-header>\r\n\r\n      <ion-card-content>\r\n        <p>{{ resena.comentario }}</p>\r\n\r\n        <div class=\"action-buttons\">\r\n          <ion-button color=\"secondary\" (click)=\"abrirModalEditarResena(resena)\">\r\n            <ion-icon name=\"create-outline\" slot=\"start\"></ion-icon> Editar\r\n          </ion-button>\r\n\r\n          <ion-button color=\"danger\" (click)=\"eliminarResena(resena.id)\">\r\n            <ion-icon name=\"trash-outline\" slot=\"start\"></ion-icon> Eliminar\r\n          </ion-button>\r\n        </div>\r\n      </ion-card-content>\r\n    </ion-card>\r\n  </ion-list>\r\n\r\n  <!-- Botón flotante para agregar reseña -->\r\n  <ion-fab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\r\n    <ion-fab-button (click)=\"abrirModalNuevaResena()\">\r\n      <ion-icon name=\"add-outline\" style=\"color: white;\"></ion-icon>\r\n    </ion-fab-button>\r\n  </ion-fab>\r\n</ion-content>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}